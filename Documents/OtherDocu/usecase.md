# ユースケース分析

本システムの利用者と操作内容を明確にするため、ユースケースを用いて要求を整理する。

## アクター定義

| アクタ        | 説明                           |
| :-------------| :-----------------------------|
| 利用者        | 鍵を借用・返却する学生や部員     |
| 管理者（幹事） | 鍵の登録や貸出状況を管理する幹事 |

## ユースケース図

以下に本システムの主要なユースケースを示す。

![UML](images/KendoClub_KeyManagementWebApp_UML.jpg)


## ユースケース記述

### （鍵の貸出）

* **アクター**：利用者
* **前提条件**：

  * 利用者がシステムに登録されていること
  * 対象となる鍵が貸出可能な状態であること
* **基本フロー**：

  1. 利用者が自身の学籍番号を選択する
  2. 利用者が借用する鍵を選択する
  3. システムが貸出情報を記録する
  4. 鍵の状態が「貸出中」に更新される
* **事後条件**：

  * 鍵が貸出中として管理される
  * 貸出履歴が保存される
* **例外フロー**：

  * 選択した鍵がすでに貸出中の場合、エラーメッセージを表示し、処理を中断する
  * 同一の鍵に対して同時に貸出処理が行われた場合、システムは先着の処理のみを有効とする

### （鍵の返却）

* **アクター**：利用者
* **前提条件**：

  * 利用者がシステムに登録されていること
  * 対象となる鍵が貸出中の状態であること
* **基本フロー**：

  1. 利用者が自身の学籍番号を選択する
  2. 利用者が返却する鍵を選択する
  3. システムが返却情報を記録する
  4. 鍵の状態が「保管中」に更新される
* **事後条件**：

  * 鍵が保管中として管理される
  * 返却履歴が保存される
* **例外フロー**：

  * 選択した鍵がすでに保管中の場合、エラーメッセージを表示し、処理を中断する

### （履歴の確認）

* **アクター**：管理者
* **前提条件**：

  * 管理者がシステムに登録されていること
* **基本フロー**：

  1. 管理者が学籍番号およびパスワードを入力する
  2. システムが認証を行う
  3. 貸出・返却履歴を表示する
  4. 必要に応じてデータを外部に出力する
* **例外フロー**：

  * IDまたはパスワードが正しくない場合、エラーメッセージを表示し、処理を中断する