# 鍵管理システム　要求定義書

## システム概要

本システムは、剣道部における鍵の貸出・返却を管理する Web アプリケーションである。
鍵の利用状況や履歴を一元管理することで、鍵紛失時の原因究明を可能とし、管理者および利用者双方の負担軽減を目的とする。

## 要求分析

現状の鍵管理方法では、トラブルが発生する可能性が高い。実際に剣道部では、過去に鍵を紛失した事例があった。
その際、どの時点で紛失したのか、また誰が鍵を扱っていたのかを特定することができなかった。
その結果、学生支援課より盗難の恐れがあるとの指摘を受け、鍵交換を行う事態となった。

このような問題を踏まえ、本開発では Web アプリケーションによる鍵管理システムを構築する。
これにより、利用者が責任を持って鍵を取り扱える環境を整備するとともに、万が一鍵の紛失が発生した場合でも、
履歴情報から原因究明を行うことが可能な状態を目指す。

| 項目            | As-Is                | To-Be                  |
|:----------------|:---------------------|:-----------------------|
| 管理方法         | 管理ルールが存在しない | Webアプリによる一元管理 |
| 貸し出し確認     | 鍵の有無のみで判断     | アプリ上で即時確認      |
| 履歴管理         | 各個人の記憶に依存     | データサーバに記録      |
| 管理者(幹事)負担 | 大きい                | 小さい                 |

---

## 要求一覧表

本システムに求められる要求を、機能要求および非機能要求に分類して整理する。

### 機能要求

| 要求内容            | 説明                                          |
| :------------------| :---------------------------------------------|
| 鍵を登録できる      | 管理者が管理対象となる鍵をシステムに登録できること |
| 鍵の貸出を記録できる | 利用者が鍵を借りた際に、貸出情報を記録できること  |
| 鍵の返却を記録できる | 利用者が鍵を返却した際に、返却情報を記録できること |
| 貸出状況を確認できる | 各鍵が貸出中かどうかを確認できること             |
| 利用者を識別できる   | 学籍番号などにより利用者を識別できること         |
| 貸出履歴を閲覧できる | 過去の貸出・返却履歴を確認できること             |

### 非機能要求

| 要求内容                  | 説明                                        |
| :------------------------| :-------------------------------------------|
| Webブラウザで利用できる    | 特定の端末に依存せず利用できること             |
| 複数人が同時に利用できる   | 同時に複数の利用者が操作しても正しく動作すること |
| 鍵は必ず1人のみに貸し出す  | 同一の鍵に対して同時に貸出処理が行われた場合、システムは先着の処理のみを有効とする |
| 操作が容易である          | ITに不慣れな利用者でも直感的に操作できること    |
| データが永続的に保存される | 貸出履歴などのデータが失われないこと            |
| 利用者権限を制御できる     | 管理者のみが履歴の閲覧・出力を行えること        |

---

## ユースケース分析

本システムの利用者と操作内容を明確にするため、ユースケースを用いて要求を整理する。

### アクター定義

| アクタ        | 説明                           |
| :-------------| :-----------------------------|
| 利用者        | 鍵を借用・返却する学生や部員     |
| 管理者（幹事） | 鍵の登録や貸出状況を管理する幹事 |

### ユースケース図

以下に本システムの主要なユースケースを示す。

![UML](images/KendoClub_KeyManagementWebApp_UML.jpg)


### ユースケース記述

#### （鍵の貸出）

* **アクター**：利用者
* **前提条件**：

  * 利用者がシステムに登録されていること
  * 対象となる鍵が貸出可能な状態であること
* **基本フロー**：

  1. 利用者が自身の学籍番号を選択する
  2. 利用者が借用する鍵を選択する
  3. システムが貸出情報を記録する
  4. 鍵の状態が「貸出中」に更新される
* **事後条件**：

  * 鍵が貸出中として管理される
  * 貸出履歴が保存される
* **例外フロー**：

  * 選択した鍵がすでに貸出中の場合、エラーメッセージを表示し、処理を中断する
  * 同一の鍵に対して同時に貸出処理が行われた場合、システムは先着の処理のみを有効とする

#### （鍵の返却）

* **アクター**：利用者
* **前提条件**：

  * 利用者がシステムに登録されていること
  * 対象となる鍵が貸出中の状態であること
* **基本フロー**：

  1. 利用者が自身の学籍番号を選択する
  2. 利用者が返却する鍵を選択する
  3. システムが返却情報を記録する
  4. 鍵の状態が「保管中」に更新される
* **事後条件**：

  * 鍵が保管中として管理される
  * 返却履歴が保存される
* **例外フロー**：

  * 選択した鍵がすでに保管中の場合、エラーメッセージを表示し、処理を中断する

#### （履歴の確認）

* **アクター**：管理者
* **前提条件**：

  * 管理者がシステムに登録されていること
* **基本フロー**：

  1. 管理者が学籍番号およびパスワードを入力する
  2. システムが認証を行う
  3. 貸出・返却履歴を表示する
  4. 必要に応じてデータを外部に出力する
* **例外フロー**：

  * IDまたはパスワードが正しくない場合、エラーメッセージを表示し、処理を中断する

---

## 免責事項

本システムでは、物理的な鍵そのものの管理（保管方法や鍵の構造変更）は対象外とする。